Рассказываю. У провайдера есть ящик, на который льётся вся почта для нашего домена. Я её забираю с определённым интервалом fetchmail вот с таким конфигом:
---------------------------------------------------------------------------------
set daemon 35

defaults
set postmaster "user_for_all"
set logfile /var/log/fetchmail.log

poll mail.iptelecom.net.ua
    proto pop3
    envelope To localdomains my_domain.kiev.ua
    user "my_user"
    pass "*****"
    is root
    nokeep
    fetchall
    flush
    smtpaddress my_domain.kiev.ua
    fetchdomains my_domain.kiev.ua
    is "*" = to "*"
    no rewrite
    smtphost 127.0.0.1

-----------------------------------------------------------------------

И как видите отдаю локальному Exim на 25 порт. Он прохавывает почту и отличну раскладывает, там всё настроено.

Баг был в этой строчке!
>    envelope To localdomains my_domain.kiev.ua 

Оказывается при рассылке мессаг с полями Cc, Bcc большинство мейлеров на сегоднешний день реальных получателей сообщения обозначают полем X-Real-To, поэтому правильно:


envelope X-Real-To localdomains my_domain.kiev.ua 

Хотя вопрос возник. Почему нельзя или как можно обрабатывать несколько заголовков, к примеру To,Cc,X-Envelope-To и так далее?

------------------------------------

подскажите, если у кого получалось?

----------------------------------------------------------------------------


"Как заставить postfix авторизоваться на relayhost"  
Сообщение от jonatan (ok) on 18-Ноя-05, 16:56  (MSK)  
/etc/postfix/main.cf: 
relayhost = [1.2.3.4] 
smtp_sasl_auth_enable = yes 
smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd 

/etc/postfix/sasl_passwd: 
[1.2.3.4]            username:password 

Глобальные опции:

       Ключевое слово   Опция   Функция

       set daemon               Устанавливает прием почты в фоновом режиме через указанные интервалы времени
       set postmaster           Имя пользователя, получающего почту, если не удалось найти подходящего получателя
       set no bouncemail        Направлять ошибочную почту постмастеру, а не отправителю
       set no spambounce        Отправлять спам обратно
       set logfile              Имя лог-файла для регистрации ошибок и информационных сообщений
       set idfile               Имя файла для хранения списка UID
       set syslog               Направлять ошибки в syslog.
       set nosyslog             Выключить направление ошибок в syslog.
       set properties           Игнорируется fetchmail (может использоваться в скриптах)

       Опции сервера:

       Ключевое слово   Опция   Функция

       via                      Имя DNS почтового сервера, переопределяющее poll
       proto[col]       -p      Протокол (регистр не важен): POP2, POP3, IMAP, APOP, KPOP
       local[domains]           Домен(ы), считаемые локальными
       port             -P      Порт TCP/IP
       auth[enticate]           Тип аутентификации (по умолчанию 'password')
       timeout          -t      Время тайм-аута в секундах (по умолчанию 300)
       envelope         -E      Имя заголовка адреса конверта
       no envelope              Запрет поиска адреса в конверте
       qvirtual         -Q      Префикс имени домена Qmail, который надо удалить из имени пользователя
       aka                      Альтернативные имена DNS почтового сервера
       interface        -I      IP-адрес интерфейса(-ов), который должен быть поднят перед началом приема почты
       monitor          -M      Указывает IP-адрес для мониторинга активности
       plugin                   Определяет команду, через которую устанавливается соединение с сервером.
       plugout                  Определяет команду, через устанавливается соединение с SMTP.
       dns                      Разрешает поиск в DNS для доменного (multidrop) ящика (по умолчанию).
       no dns                   Отключить DNS для multidrop
       checkalias               Сравнивать адреса IP для multidrop
       no checkalias            Не сравнивать имена для multidrop (по умолчанию)
       uidl             -U      Использовать клиентские UIDL для POP3
       no uidl                  Отключить использование UIDL в POP3 (по умолчанию)
       interval                 Проверять сервер каждые N секунд.
       netsec                   Передать опцию в запрос IPsec.
       principal                Установить Kerberos principal (только при использовании imap и kerberos)

       Опции пользователя:

       Ключевое слово   Опция   Функция

       user[name]       -u      Имя пользователя на удаленной системе (имя локального пользователя, если после имени указано 'here')
       is                       Связь между удаленным и локальным именами пользователя
       to                       Связь между локальным и удаленным именами пользователя
       pass[word]               Пароль на удаленной системе
       keep             -k      Не удалять на сервере просмотренные ранее сообщения
       flush            -F      Перед запросом удалить на сервере все прочтенные ранее сообщения
       fetchall         -a      Принять все сообщения независимо от того, прочтенное оно или нет
       rewrite                  Переопределить адрес получателя для ответа (по умолчанию)
       stripcr                  Убрать возвраты каретки в конце каждой строки
       forcecr                  Поставить возвраты каретки в конце каждой строки
       pass8bits                Давать команду BODY=8BITMIME на сервер ESMTP
       dropstatus               Убрать строки "Status" и "X-Mozilla-Status" из входящей почты
       dropdelivered            Убрать строки "Delivered-To" из входящей почты
       mimedecode               Перекодировать сообщения из quoted-printable в 8-bit MIME
       idle                     Время простоя в ожидании новых сообщений после каждого приема (только IMAP)
       no keep          -K      Удаление прочитанных сообщений с сервера (по умолчанию).
       no flush                 Не удалять прочитанные сообщение перед приемом почты (по умолчанию)
       no fetchall              Прием только новых сообщений (по умолчанию)
       no rewrite               Не переписывать заголовки
       no stripcr               Не отрезать возврат каретки (по умолчанию)
       no forcecr               Не добавлять возврат каретки в конец строки (по умолчанию)
       no pass8bits             Не посылать BODY=8BITMIME на сервер ESMTP listener (по умолчанию)
       no dropstatus            Не удалять заголовки "Status" (по умолчанию)
       no dropdelivered         Не удалять заголовки "Delivered-To" (по умолчанию)
       no mimedecode            Не перекодировать quoted-printable в 8-bit MIME (по умолчанию)
       no idle                  Не ждать новых сообщений в конце приема почты (только IMAP)
       limit            -l      Максимальный размер письма
       warnings         -w      Интервал предупреждений о размере письма
       batchlimit       -b      Максимальное число сообщений, пересылаемых за одно соединение
       fetchlimit       -B      Максимальное количество сообщений, принимаемых за один сеанс
       expunge          -e      expunge на каждом #N-м сообщении (только IMAP и POP3)
       tracepolls               Добавить трассу приема в заголовок Received
       properties               Игнорируется fetchmail (может использоваться в скриптах расширения)


 
